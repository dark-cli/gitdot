##### ── CUSTOM SHORTCUTS (DOCS) ─────────────────────────────────────────────
# Prefix = Ctrl-s
#
# Shortcuts:
#   Prefix + C   : New session (prompts for name).
#   Prefix + s   : FZF session switcher (pick a session, jump there).
#   Prefix + ?   : Show current session name on-screen. (Overrides tmux help.)
#   Prefix + R   : Rename current session (prefills with current name).
#   Ctrl-b       : (No prefix) FZF window picker (your existing binding).
#   Ctrl-q       : Kill current session (no prefix, asks confirm).
#
# Status bar:
#   Left shows current session name (#S). Right shows date/time.
#
# NOTE: If Ctrl-s/Ctrl-q ever freeze your terminal, disable XON/XOFF:
#   run:  stty -ixon
##### ────────────────────────────────────────────────────────────────────────


# Reload config with Ctrl-s r
unbind r
bind r source-file ~/.tmux.conf

# Set prefix to Ctrl-s
unbind C-b
set -g prefix C-s
bind C-s send-prefix

# kill a window
bind & kill-window

# Vertical split (right)
bind | split-window -h

# Horizontal split (below)
bind - split-window -v

# Global (no prefix): FZF window picker (kept)
bind -n C-b run-shell -b \
  "tmux list-windows -F \"##I:##W\" | fzf-tmux | cut -d \":\" -f 1 | xargs tmux select-window -t"

# ── Sessions ────────────────────────────────────────────────────────────────
# Create new session (prompts for a name)
bind C command-prompt -p "New session name:" "new-session -s '%%'"

# Session switcher via fzf (overrides default choose-tree on 's')
# bind s run-shell "tmux list-sessions -F '#{session_name}' | fzf-tmux | xargs -r tmux switch-client -t"

# Show current session name in a popup/message (overrides default help on '?')
bind ? display-message "Session: #S"

# Rename current session (prefilled with current name)
bind R command-prompt -I '#S' "rename-session '%%'"

# Kill current session with Ctrl+q (no prefix) + confirmation
bind -n C-q kill-session

# ── Indexing ────────────────────────────────────────────────────────────────
set -g base-index 1
setw -g pane-base-index 1

# ── Navigation ──────────────────────────────────────────────────────────────
setw -g mode-keys vi
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# ── DESIGN TWEAKS ───────────────────────────────────────────────────────────
# don't do anything when a 'bell' rings
set -g visual-activity off
set -g visual-bell off
set -g visual-silence off
setw -g monitor-activity off
set -g bell-action none

# clock mode
setw -g clock-mode-colour yellow

# copy mode
setw -g mode-style 'fg=red bg=default bold'

# panes
set -g pane-border-style 'fg=red'
set -g pane-active-border-style 'fg=yellow'

# statusbar
set -g status-position bottom
set -g status-justify left
set -g status-style 'fg=red bg=default'

# >>> Show session name on the left
set -g status-left ' #S '
set -g status-left-length 20

set -g status-right-style 'fg=yellow bg=default'
set -g status-right '%Y-%m-%d '
set -g status-right-length 50

setw -g window-status-current-style 'fg=red bg=default'
setw -g window-status-current-format ' #I #W #F '

setw -g window-status-style 'fg=white bg=default'
setw -g window-status-format ' #I #[fg=white]#W #[fg=yellow]#F '

setw -g window-status-bell-style 'fg=yellow bg=default bold'

# messages
set -g message-style 'fg=yellow bg=default bold'

# === NICE SCROLLING AND COPY ===
set -g mouse on
setw -g mode-keys vi
bind -T copy-mode-vi WheelUpPane   send-keys -X scroll-up
bind -T copy-mode-vi WheelDownPane send-keys -X scroll-down
bind -n S-PageUp copy-mode
bind -T copy-mode-vi S-PageUp   send-keys -X page-up
bind -T copy-mode-vi S-PageDown send-keys -X page-down
bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi y send -X copy-selection
